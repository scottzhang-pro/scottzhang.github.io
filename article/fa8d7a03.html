<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.png">
  <link rel="mask-icon" href="/images/logo.png" color="#222">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="https://fonts.loli.net/css?family=Noto Serif SC:300,300italic,400,400italic,700,700italic|Roboto Mono:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">
<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"scottzhang.pro","root":"/","scheme":"Mist","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":"mac"},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":false,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="这篇文章涵盖了Linux中关于基本命令、环境变量、特殊符号、Shell 编辑工具、帮助文档查询、标准输入输出、符号链接、解压缩、超级用户以及目录的结构介绍等内容。">
<meta property="og:type" content="article">
<meta property="og:title" content="Linux-基本命令与目录结构">
<meta property="og:url" content="https://scottzhang.pro/article/fa8d7a03.html">
<meta property="og:site_name" content="Scott&#39;s Blog">
<meta property="og:description" content="这篇文章涵盖了Linux中关于基本命令、环境变量、特殊符号、Shell 编辑工具、帮助文档查询、标准输入输出、符号链接、解压缩、超级用户以及目录的结构介绍等内容。">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://s2.loli.net/2022/03/01/U13k84fPnlTDwYp.png">
<meta property="og:image" content="https://s2.loli.net/2022/03/01/6Z1ztSubRsA3vlP.png">
<meta property="og:image" content="https://s2.loli.net/2022/03/01/utf8BAJgk43Fnbz.png">
<meta property="og:image" content="https://s2.loli.net/2022/03/02/X3bOYeqWzfl9Ex4.png">
<meta property="og:image" content="https://s2.loli.net/2022/03/02/GIVpzYK9hBNSUxC.png">
<meta property="og:image" content="https://s2.loli.net/2022/03/02/vRuS1hNDzWUI2Hl.png">
<meta property="article:published_time" content="2022-03-02T07:06:53.000Z">
<meta property="article:modified_time" content="2022-03-02T07:19:54.660Z">
<meta property="article:author" content="Scott">
<meta property="article:tag" content="Linux">
<meta property="article:tag" content="Operating-System">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://s2.loli.net/2022/03/01/U13k84fPnlTDwYp.png">

<link rel="canonical" href="https://scottzhang.pro/article/fa8d7a03.html">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>Linux-基本命令与目录结构 | Scott's Blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<link rel="alternate" href="/atom.xml" title="Scott's Blog" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Scott's Blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">学则不固, 知则不惑</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://scottzhang.pro/article/fa8d7a03.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/uploads/instagram_profile_image.png">
      <meta itemprop="name" content="Scott">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Scott's Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Linux-基本命令与目录结构
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2022-03-02 15:06:53 / 修改时间：15:19:54" itemprop="dateCreated datePublished" datetime="2022-03-02T15:06:53+08:00">2022-03-02</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/How-Linux-Works/" itemprop="url" rel="index"><span itemprop="name">How Linux Works</span></a>
                </span>
            </span>

          
            <span id="/article/fa8d7a03.html" class="post-meta-item leancloud_visitors" data-flag-title="Linux-基本命令与目录结构" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/article/fa8d7a03.html#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/article/fa8d7a03.html" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <blockquote>
<p>这篇文章涵盖了Linux中关于基本命令、环境变量、特殊符号、Shell 编辑工具、帮助文档查询、标准输入输出、符号链接、解压缩、超级用户以及目录的结构介绍等内容。</p>
</blockquote>
<span id="more"></span>
<h2 id="关于-unix-和-linux">关于 Unix 和 Linux</h2>
<p>Linux is a Unix flavor at heart. You’ll see the word Unix in this chapter more than Linux because you can take what you learn straight over to BSD and other Unix-flavored systems.</p>
<h2 id="bourne-shell-binsh">Bourne Shell: /bin/sh</h2>
<p>A shell is a program that runs commands.</p>
<p>现在有很多的 Shell，但大部分的都是起源于 Bourne shell (/bin/sh)，这是贝尔实验室早期开发给 Unix 用的。</p>
<p>Linux 也有一个优化过的 Shell 叫 <code>bash</code>，全称是 bourne again shell.</p>
<h2 id="基本命令">基本命令</h2>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">ls</span><br><span class="line">cp</span><br><span class="line">mv</span><br><span class="line">rm</span><br><span class="line">touch</span><br><span class="line">mkdir</span><br><span class="line"><span class="built_in">echo</span></span><br><span class="line"></span><br><span class="line">grep</span><br><span class="line">less</span><br><span class="line">more</span><br><span class="line"><span class="built_in">pwd</span></span><br><span class="line">diff 对比两个文件不同</span><br><span class="line">file 查看一个文件的格式</span><br><span class="line">find</span><br><span class="line">head</span><br><span class="line">tail</span><br><span class="line">sort</span><br><span class="line">passwd 改密码</span><br></pre></td></tr></table></figure>
<h2 id="环境和-shell-变量">环境和 Shell 变量</h2>
<p>Shell 环境下可以保存一些变量:</p>
<p><img src="https://s2.loli.net/2022/03/01/U13k84fPnlTDwYp.png" /></p>
<p>如果希望当 shell 启动的时候就将一些变量存起来，则可通过环境变量。</p>
<p>The main difference between environment and shell variables is that the operating system passes all of your shell’s environment variables to programs that the shell runs, whereas shell variables cannot be accessed in the commands that you run.</p>
<h2 id="命令地址">命令地址</h2>
<p><code>Path</code> 是一个特殊的环境变量，我们输入的指令 shell 会去这些路径中寻找程序，例如这是我的电脑上 <code>Path</code> 的值：</p>
<p><img src="https://s2.loli.net/2022/03/01/6Z1ztSubRsA3vlP.png" /></p>
<p>这个地址中的可以编辑，添加。</p>
<h2 id="特殊符号">特殊符号</h2>
<table>
<colgroup>
<col style="width: 16%" />
<col style="width: 16%" />
<col style="width: 66%" />
</colgroup>
<thead>
<tr class="header">
<th>符号</th>
<th>符号名</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>*</td>
<td>star, asterisk</td>
<td>Regular expression, glob character</td>
</tr>
<tr class="even">
<td>.</td>
<td>dot</td>
<td>Current directory, file/hostname delimiter</td>
</tr>
<tr class="odd">
<td>!</td>
<td>bang</td>
<td>Negation, command history</td>
</tr>
<tr class="even">
<td>|</td>
<td>pipe</td>
<td>Command pipes</td>
</tr>
<tr class="odd">
<td>/</td>
<td>(forward) slash</td>
<td>Directory delimiter, search command</td>
</tr>
<tr class="even">
<td>\</td>
<td>backslash</td>
<td>Literals, macros (never directories)</td>
</tr>
<tr class="odd">
<td>$</td>
<td>dollar</td>
<td>Variables, end of line</td>
</tr>
<tr class="even">
<td>'</td>
<td>tick, (single) quote</td>
<td>Literal strings</td>
</tr>
<tr class="odd">
<td>`</td>
<td>backtick, backquote</td>
<td>Command substitution</td>
</tr>
<tr class="even">
<td>"</td>
<td>double quote</td>
<td>Semi-literal strings</td>
</tr>
<tr class="odd">
<td>^</td>
<td>caret</td>
<td>Negation, beginning of line</td>
</tr>
<tr class="even">
<td>~</td>
<td>tilde, squiggle</td>
<td>Negation, directory shortcut</td>
</tr>
<tr class="odd">
<td>#</td>
<td>hash, sharp, pound</td>
<td>Comments, preprocessor, substitutions</td>
</tr>
<tr class="even">
<td>[ ]</td>
<td>(square) brackets</td>
<td>Ranges</td>
</tr>
<tr class="odd">
<td>{ }</td>
<td>braces, (curly) brackets</td>
<td>Statement blocks, ranges</td>
</tr>
<tr class="even">
<td>_</td>
<td>underscore, under</td>
<td>Cheap substitute for a space used when spaces aren’t wanted or allowed, or when autocomplete algorithms get confused</td>
</tr>
</tbody>
</table>
<h2 id="shell-中编辑">Shell 中编辑</h2>
<table>
<thead>
<tr class="header">
<th>快捷键</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>CTRL-B</td>
<td>Move the cursor left</td>
</tr>
<tr class="even">
<td>CTRL-F</td>
<td>Move the cursor right</td>
</tr>
<tr class="odd">
<td>CTRL-P</td>
<td>View the previous command (or move the cursor up)</td>
</tr>
<tr class="even">
<td>CTRL-N</td>
<td>View the next command (or move the cursor down)</td>
</tr>
<tr class="odd">
<td>CTRL-A</td>
<td>Move the cursor to the beginning of the line</td>
</tr>
<tr class="even">
<td>CTRL-E</td>
<td>Move the cursor to the end of the line</td>
</tr>
<tr class="odd">
<td>CTRL-W</td>
<td>Erase the preceding word</td>
</tr>
<tr class="even">
<td>CTRL-U</td>
<td>Erase from cursor to beginning of line</td>
</tr>
<tr class="odd">
<td>CTRL-K</td>
<td>Erase from cursor to end of line</td>
</tr>
<tr class="even">
<td>CTRL-Y</td>
<td>Paste erased text (for example, from CTRL-U)</td>
</tr>
</tbody>
</table>
<h2 id="查询帮助文档">查询帮助文档</h2>
<p><code>man ls</code> 查询 ls 的帮助；<code>man -k kerword</code> 查询有 keyword 关键字的帮助，结果你会发现有些数字，这些数字是告诉你这个命令在哪个分类下出现，数字对应的分类信息如下</p>
<table>
<thead>
<tr class="header">
<th>Section</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>User commands</td>
</tr>
<tr class="even">
<td>2</td>
<td>Kernel system calls</td>
</tr>
<tr class="odd">
<td>3</td>
<td>Higher-level Unix programming library documentation</td>
</tr>
<tr class="even">
<td>4</td>
<td>Device interface and driver information</td>
</tr>
<tr class="odd">
<td>5</td>
<td>File descriptions (system configuration files)</td>
</tr>
<tr class="even">
<td>6</td>
<td>Games</td>
</tr>
<tr class="odd">
<td>7</td>
<td>File formats, conventions, and encodings (ASCII, suffixes, and so on)</td>
</tr>
<tr class="even">
<td>8</td>
<td>System commands and servers</td>
</tr>
</tbody>
</table>
<h2 id="标准输入输出和错误">标准输入输出和错误</h2>
<ul>
<li><code>command &gt; file</code> # 命令的输出存到 file</li>
<li><code>command &gt;&gt; file</code> # 命令的输出追加到 file</li>
<li><code>command1 | command2</code> # 命令1 的输出作为命令2 的输入</li>
<li><code>head &lt; /proc/cpuinfo#</code> 文件内容到输出</li>
</ul>
<p>如果执行一个命令会报错，但希望将报错的内容单独保存到其他文件中，可使用下图的命令，The number <code>2</code> specifies the stream ID that the shell modifies. Stream ID 1 is standard output (the default), and 2 is standard error. <code>&gt;&amp;</code> notation will send both standard output and standard error to the file named f</p>
<p><img src="https://s2.loli.net/2022/03/01/utf8BAJgk43Fnbz.png" /></p>
<h2 id="管理进程">管理进程</h2>
<h3 id="列出进程">列出进程</h3>
<p>在系统中，每个进程都有一个 PID 作为标识进程的唯一 ID，在 Linux 可以使用 <code>ps</code> 命令直接查看所有进程的情况:</p>
<p><img src="https://s2.loli.net/2022/03/02/X3bOYeqWzfl9Ex4.png" /></p>
<ul>
<li>PID, The process ID.</li>
<li>TTY, The terminal device where the process is running. More about this later.</li>
<li>STAT, what the process is doing and where its memory resides. For example, S means sleeping and R means running. (See the ps(1) manual page for a description of all the symbols.)</li>
<li>TIME, the total amount of time that the process has spent running instructions on the processor. Remember that because processes don’t run constantly, this is different from the time since the process started (or “wall-clock time”).</li>
<li>COMMAND, This one might seem obvious as the command used to run the program, but be aware that a process can change this field from its original value. Furthermore, the shell can perform glob expansion, and this field will reflect the expanded command instead of what you enter at the prompt.</li>
</ul>
<blockquote>
<p>Mac 下没有 STAT 这列</p>
</blockquote>
<p>Ps 还有一些选项可以指定，方便我们定义输出：</p>
<ul>
<li><code>ps x</code> Show all of your running processes.</li>
<li><code>ps ax</code> Show all processes on the system, not just the ones you own.</li>
<li><code>ps u</code> Include more detailed information on processes.</li>
<li><code>ps w</code> Show full command names, not just what fits on one line.</li>
</ul>
<h3 id="杀死进程">杀死进程</h3>
<p>杀死一个进程使用 kill 指令。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">kill pid, 让内核向进程发送一个 TERM 信号（默认），停止该进程</span><br><span class="line">kill -STOP pid, 发送 STOP 信号， 冻结该进程，冻结的进程还会存在于内存</span><br><span class="line">kill -CONT pid, 恢复一个冻结的进程</span><br></pre></td></tr></table></figure>
<p>发送上面的指令可能你还会看到进程存在，因为操作系统会给进程机会去处理现场，进程也可能直接忽略你发送的信号，这时候你可以强制杀死一个进程，不给其任何机会</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">kill -KILL pid</span><br><span class="line">kill -9 pid</span><br></pre></td></tr></table></figure>
<h3 id="作业管理">作业管理</h3>
<p>作业管理，allows you to suspend and switch between programs you’re using。</p>
<p>For example, you can send a TSTP signal with CTRL-Z and then start the process again by entering fg (bring to foreground) or bg (move to background; see the next section).</p>
<p>可使用 <code>jobs</code> 查看是否有什么作业正在运行。</p>
<p>用 <code>screen</code> 或者 <code>tmux</code> 来管理作业是一个更好的选择。</p>
<h3 id="进程放到后台使用">进程放到后台使用</h3>
<p>如果你有一个解压大量文件的需求，当你运行的时候，只有当全部任务结束你才会看到输出，这时候你也没办法做什么，但你可以将这个任务放到后台去做：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gunzip file.gz &amp;</span><br></pre></td></tr></table></figure>
<p>这会给你一个 PID 告诉你正在处理这个任务的进程。</p>
<p>如果这个后台运行的进程需要标准输入，那么它会进入冻结状态，可以使用 <code>fg</code> 将其带入前台，如果这个后台进程报错了，那你会收到报错的信息（即便你当时正在忙别的事情😂），如果不想被打扰，最好将其错误信息重定向到其他地方（前面介绍过）.</p>
<h2 id="文件模式和权限">文件模式和权限</h2>
<p>所有 Unix 文件都有一组权限来决定你是否可以读或者写:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-rw-r--r-- 1 juser somegroup 7041  Mar 26 19:34  endnotes.html</span><br></pre></td></tr></table></figure>
<p>最开始的 <code>-rw-r--r--</code> 表明了该文件的权限，其含义如下:</p>
<p><img src="https://s2.loli.net/2022/03/02/GIVpzYK9hBNSUxC.png" /></p>
<p>第一个 - 往后开始，三个一组为权限组，其中各个字母的意思如下：</p>
<ul>
<li>r means that the file is readable.</li>
<li>w means that the file is writable.</li>
<li>x means that the file is executable (you can run it as a program).</li>
<li>- means “nothing” (more specifically, the permission for that slot in the set has not been granted).</li>
<li>有些会是s，用来表示用户执行这个程序时，将以这个程序所有者的身份执行，可以直接设置s权限，而无需先有x，但是有可能未生效（将以大S表示）</li>
<li>Mac OS X文件系统还有一个的附加属性@.</li>
</ul>
<h2 id="权限修改">权限修改</h2>
<p>使用 <code>chmod</code> 来修改权限，如对 group 和 others 增加写权限:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">chmod g+r file</span><br><span class="line">chmod o+r file</span><br><span class="line"></span><br><span class="line"><span class="comment"># 或者通过一条命令</span></span><br><span class="line">chmod go+r file</span><br></pre></td></tr></table></figure>
<p>你可能会看到通过数字来指定权限的形式：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># sets all permission bits at once</span></span><br><span class="line">chmod 644 file</span><br></pre></td></tr></table></figure>
<p>无需记住所有数字的意思，常用的权限可以参考下表：</p>
<table style="width:100%;">
<colgroup>
<col style="width: 14%" />
<col style="width: 57%" />
<col style="width: 28%" />
</colgroup>
<thead>
<tr class="header">
<th>Mode</th>
<th>Meaning</th>
<th>Used for</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>644</td>
<td>user: read/write; group, other: read</td>
<td>files</td>
</tr>
<tr class="even">
<td>600</td>
<td>user: read/write; group, other: none</td>
<td>files</td>
</tr>
<tr class="odd">
<td>755</td>
<td>user: read/write/execute; group, other: read/execute</td>
<td>directories, programs</td>
</tr>
<tr class="even">
<td>700</td>
<td>user: read/write/execute; group, other: none</td>
<td>directories, programs</td>
</tr>
<tr class="odd">
<td>711</td>
<td>user: read/write/execute; group, other: execute</td>
<td>directories</td>
</tr>
</tbody>
</table>
<p>关于目录的权限：</p>
<ul>
<li>You can list the contents of a directory if it’s readable, but you can only access a file in a directory if the directory is executable.</li>
<li>You need both in most cases;</li>
</ul>
<p><code>unmask</code> 命令:</p>
<ul>
<li>ou can specify a set of default permissions with the umask shell command, which applies a predefined set of permissions to any new file you create.</li>
<li>use umask 022 if you want everyone to be able to see all of the files and directories that you create, and use umask 077 if you don’t.</li>
</ul>
<h2 id="符号链接">符号链接</h2>
<p>symbolic link is a file that points to another file or a directory, effectively creating an alias (like a shortcut in Windows). Symbolic links offer quick access to obscure directory paths.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lrwxrwxrwx 1 ruser users  11 Feb 27 13:52  somedir -&gt; /home/origdir</span><br></pre></td></tr></table></figure>
<p>若符号链接代表的文件不存在，则依赖该文件的命令会出错，除了 <code>ls file</code>。</p>
<p>通过符号链接，你无法知道指向的文件或者文件夹的特征，你必须访问该路径去看了才知道，而且一个符号链接可以指向另外一个符号链接，这种被称为 chained symbolic links.</p>
<p>创建一个符号链接可以通过下面的指令：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># -s 指定为软链接，若没有则是硬链接</span><br><span class="line">ln -s target linkname</span><br></pre></td></tr></table></figure>
<blockquote>
<p>注意不要将 target 和 linkname 搞反了，否则会发生的事情就是：creates a link named target inside linkname, and the link will point to itself unless linkname is a full path.</p>
</blockquote>
<p>符号链接可能还有一个问题是，你以为你编辑的是一个文件（可以编辑），但其实它是一个符号链接。</p>
<p>符号链接本质上是创建一个新的文件，这个文件保存的是目标文件的地址，而硬链接则是指向文件系统中底层的数据。</p>
<ul>
<li>当对一个文件创建了硬链接，如果对硬链接修改，那么原始文件也会被修改</li>
<li>当原始文件被删除，访问硬链接还可以看到原始文件内容，因为底层的文件数据存在硬链接这个引用，并未被真的删除；访问软链接则会提示原始文件已经不见。</li>
<li>原始文件被删除后，当向硬链接追加内容，硬链接文件内容会有原始内容和新内容；软连接则会创建一个新文件，并将新内容写入。</li>
</ul>
<h2 id="解压缩">解压缩</h2>
<ul>
<li><code>gzip</code>, The program gzip (GNU Zip) is one of the current standard Unix compression programs. 但无法压缩多个文件.</li>
<li><code>tar</code>, 可压缩多个文件，细节如下：</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># 压缩</span><br><span class="line"># c, create mode</span><br><span class="line"># v, 显示输入，两个v则显示更多细节</span><br><span class="line"># f, 指定要压缩的文件</span><br><span class="line">tar cvf archive.tar file1 file2 ...</span><br><span class="line"></span><br><span class="line"># 解压</span><br><span class="line">tar xvf archive.tar</span><br><span class="line"># x, 解压模式</span><br></pre></td></tr></table></figure>
<p>在解压一个文件之前，先查看压缩文件内有哪些东西是有必要的，可以通过 <code>t</code> 模式来实现。</p>
<p>解压时的权限控制： consider using the p option to preserve permissions. Use this in extract mode to override your umask and get the exact permissions specified in the archive.</p>
<p>压缩文件有时候会有多重压缩的情况，比如你可能看到一个这样的文件: <code>file.tar.gz</code>，解压这种文件需要从右往左使用对应工具解压。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">gunzip file.tar.gz</span><br><span class="line">tar xvf file.tar</span><br></pre></td></tr></table></figure>
<p>但分别解压是比较慢的，需要两次磁盘读写和io时间，可以利用管道来处理:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">zcat file.tar.gz | tar xvf -</span><br></pre></td></tr></table></figure>
<p><code>zcat</code> 相当于 <code>gunzip -dc</code>, 其中 d 的意思是解压，c 的意思是将结果放到标准输出。</p>
<p><code>zcat</code> 使用非常频繁, 所以 tar 将其放在内置参数中：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar ztvf file.tar.gz</span><br></pre></td></tr></table></figure>
<p>其他的解压工具还有 <code>xz</code> 和 <code>bzip2</code>.</p>
<h2 id="linux-目录结构">Linux 目录结构</h2>
<p>目录结构一般如下图所示：</p>
<p><img src="https://s2.loli.net/2022/03/02/vRuS1hNDzWUI2Hl.png" /></p>
<hr />
<p><strong>一般的目录文件夹介绍：</strong></p>
<ul>
<li>/bin Contains ready-to-run programs (also known as executables), including most of the basic Unix commands such as ls and cp. Most of the programs in /bin are in binary format, having been created by a C compiler, but some are shell scripts in modern systems.</li>
<li>/dev Contains device files. You’ll learn more about these in Chapter 3.</li>
<li>/etc This core system configuration directory (pronounced EHT-see) contains the user password, boot, device, networking, and other setup files.</li>
<li>/home Holds home (personal) directories for regular users. Most Unix installations conform to this standard.</li>
<li>/lib An abbreviation for library, this directory holds library files containing code that executables can use. There are two types of libraries: static and shared. The /lib directory should contain only shared libraries, but other lib directories, such as /usr/lib, contain both varieties as well as other auxiliary files. (We’ll discuss shared libraries in more detail in Chapter 15.)</li>
<li>/proc Provides system statistics through a browsable directory-and-file interface. Much of the /proc subdirectory structure on Linux is unique, but many other Unix variants have similar features. The /proc directory contains information about currently running processes as well as some kernel parameters.</li>
<li>/run Contains runtime data specific to the system, including certain process IDs, socket files, status records, and, in many cases, system logging. This is a relatively recent addition to the root directory; in older systems, you can find it in /var/run. On newer systems, /var/run is a symbolic link to /run.</li>
<li>/sys This directory is similar to /proc in that it provides a device and system interface. You’ll read more about /sys in Chapter 3.</li>
<li>/sbin The place for system executables. Programs in /sbin directories relate to system management, so regular users usually do not have /sbin components in their command paths. Many of the utilities found here don’t work if not run as root.</li>
<li>/tmp A storage area for smaller, temporary files that you don’t care much about. Any user may read to and write from /tmp, but the user may not have permission to access another user’s files there. Many programs use this directory as a workspace. If something is extremely important, don’t put it in /tmp because most distributions clear /tmp when the machine boots and some even remove its old files periodically. Also, don’t let /tmp fill up with garbage because its space is usually shared with something critical (the rest of /, for example).</li>
<li>/usr Although pronounced “user,” this subdirectory has no user files. Instead, it contains a large directory hierarchy, including the bulk of the Linux system. Many of the directory names in /usr are the same as those in the root directory (like /usr/bin and /usr/lib), and they hold the same type of files. (The reason that the root directory does not contain the complete system is primarily historic—in the past, it was to keep space requirements low for the root.)</li>
<li>/var The variable subdirectory, where programs record information that can change over the course of time. System logging, user tracking, caches, and other files that system programs create and manage are here. (You’ll notice a /var/tmp directory here, but the system doesn’t wipe it on boot.)</li>
</ul>
<p><strong>其他 root 目录下的子文件夹：</strong></p>
<ul>
<li>/boot Contains kernel boot loader files. These files pertain only to the very first stage of the Linux startup procedure, so you won’t find information about how Linux starts up its services in this directory. See Chapter 5 for more about this.</li>
<li>/media A base attachment point for removable media such as flash drives that is found in many distributions.</li>
<li>/opt This may contain additional third-party software. Many systems don’t use /opt.</li>
</ul>
<p><strong>其他用户目录下存在的子文件夹：</strong></p>
<ul>
<li>/include Holds header files used by the C compiler.</li>
<li>/local Is where administrators can install their own software. Its structure should look like that of / and /usr.</li>
<li>/man Contains manual pages.</li>
<li>/share Contains files that should work on other kinds of Unix machines with no loss of functionality. These are usually auxiliary data files that programs and libraries read as necessary. In the past, networks of machines would share this directory from a file server, but today a share directory used in this manner is rare because there are no realistic space restraints for these kinds of files on contemporary systems. Instead, on Linux distributions, you’ll find /man, /info, and many other subdirectories here because it is an easily understood convention.</li>
</ul>
<p><strong>内核路径</strong></p>
<p>在 Linux 中，内核一般放在 /vmlinuz or /boot/vmlinuz，在系统启动的时候，boot loader 会启动内核。关于 boot loader 会在之后的文章中介绍。</p>
<h2 id="以超级用户执行命令">以超级用户执行命令</h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vipw</span><br></pre></td></tr></table></figure>
<p>可通过 <code>/etc/sudoers</code> 文件配置谁可以使用 sudo 命令执行，是否需要密码等。</p>
<p>下面的配置表明，user1 和 user2 可以直接使用 sudo 命令，而不需要输入密码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># defines an ADMINS user alias with the two users</span><br><span class="line">User_Alias ADMINS = user1, user2</span><br><span class="line"></span><br><span class="line"># users in the ADMINS alias can use sudo to execute commands as root</span><br><span class="line"># The second ALL means “any command.” The first ALL means “any host.” </span><br><span class="line">ADMINS ALL = NOPASSWD: ALL</span><br><span class="line"></span><br><span class="line"># superuser may also use sudo to run any command on any host.</span><br><span class="line"># extra (ALL) means that the superuser may also run commands as any other user.</span><br><span class="line">root ALL=(ALL) ALL</span><br><span class="line"></span><br><span class="line"># 上面的这句，可以扩展为</span><br><span class="line">ADMINS ALL = (ALL) NOPASSWD: ALL</span><br></pre></td></tr></table></figure>
<blockquote>
<p>使用 <code>visudo</code> 命令来编辑上面这个文件，它会检查你的语法。</p>
</blockquote>
<p>要查看 sudo 命令的历史记录，可使用:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">journalctl SYSLOG_IDENTIFIER=sudo</span><br></pre></td></tr></table></figure>
<p>来启用，对于老一点的系统，可能需要在 <code>/var/log</code> 查看, 比如 <code>/var/log/auth.log.</code></p>

    </div>

    
    
    
        <div class="reward-container">
  <div></div>
  <button onclick="var qr = document.getElementById('qr'); qr.style.display = (qr.style.display === 'none') ? 'block' : 'none';">
    打赏
  </button>
  <div id="qr" style="display: none;">
      
      <div style="display: inline-block;">
        <img src="/uploads/wechat-reward-image.png" alt="Scott 微信支付">
        <p>微信支付</p>
      </div>

  </div>
</div>


      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/Linux/" rel="tag"># Linux</a>
              <a href="/tags/Operating-System/" rel="tag"># Operating-System</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/article/74b16f02.html" rel="prev" title="Linux 是如何工作的- Big Picture">
      <i class="fa fa-chevron-left"></i> Linux 是如何工作的- Big Picture
    </a></div>
      <div class="post-nav-item"></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
    <div class="comments" id="valine-comments"></div>

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%85%B3%E4%BA%8E-unix-%E5%92%8C-linux"><span class="nav-number">1.</span> <span class="nav-text">关于 Unix 和 Linux</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#bourne-shell-binsh"><span class="nav-number">2.</span> <span class="nav-text">Bourne Shell: &#x2F;bin&#x2F;sh</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E5%91%BD%E4%BB%A4"><span class="nav-number">3.</span> <span class="nav-text">基本命令</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%8E%AF%E5%A2%83%E5%92%8C-shell-%E5%8F%98%E9%87%8F"><span class="nav-number">4.</span> <span class="nav-text">环境和 Shell 变量</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%91%BD%E4%BB%A4%E5%9C%B0%E5%9D%80"><span class="nav-number">5.</span> <span class="nav-text">命令地址</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%89%B9%E6%AE%8A%E7%AC%A6%E5%8F%B7"><span class="nav-number">6.</span> <span class="nav-text">特殊符号</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#shell-%E4%B8%AD%E7%BC%96%E8%BE%91"><span class="nav-number">7.</span> <span class="nav-text">Shell 中编辑</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9F%A5%E8%AF%A2%E5%B8%AE%E5%8A%A9%E6%96%87%E6%A1%A3"><span class="nav-number">8.</span> <span class="nav-text">查询帮助文档</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%A0%87%E5%87%86%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA%E5%92%8C%E9%94%99%E8%AF%AF"><span class="nav-number">9.</span> <span class="nav-text">标准输入输出和错误</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AE%A1%E7%90%86%E8%BF%9B%E7%A8%8B"><span class="nav-number">10.</span> <span class="nav-text">管理进程</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%97%E5%87%BA%E8%BF%9B%E7%A8%8B"><span class="nav-number">10.1.</span> <span class="nav-text">列出进程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9D%80%E6%AD%BB%E8%BF%9B%E7%A8%8B"><span class="nav-number">10.2.</span> <span class="nav-text">杀死进程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%9C%E4%B8%9A%E7%AE%A1%E7%90%86"><span class="nav-number">10.3.</span> <span class="nav-text">作业管理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BF%9B%E7%A8%8B%E6%94%BE%E5%88%B0%E5%90%8E%E5%8F%B0%E4%BD%BF%E7%94%A8"><span class="nav-number">10.4.</span> <span class="nav-text">进程放到后台使用</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%96%87%E4%BB%B6%E6%A8%A1%E5%BC%8F%E5%92%8C%E6%9D%83%E9%99%90"><span class="nav-number">11.</span> <span class="nav-text">文件模式和权限</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9D%83%E9%99%90%E4%BF%AE%E6%94%B9"><span class="nav-number">12.</span> <span class="nav-text">权限修改</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AC%A6%E5%8F%B7%E9%93%BE%E6%8E%A5"><span class="nav-number">13.</span> <span class="nav-text">符号链接</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%A7%A3%E5%8E%8B%E7%BC%A9"><span class="nav-number">14.</span> <span class="nav-text">解压缩</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#linux-%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84"><span class="nav-number">15.</span> <span class="nav-text">Linux 目录结构</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BB%A5%E8%B6%85%E7%BA%A7%E7%94%A8%E6%88%B7%E6%89%A7%E8%A1%8C%E5%91%BD%E4%BB%A4"><span class="nav-number">16.</span> <span class="nav-text">以超级用户执行命令</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Scott"
      src="/uploads/instagram_profile_image.png">
  <p class="site-author-name" itemprop="name">Scott</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">63</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">15</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">66</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/wittyfans" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;wittyfans" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://weibo.com/wittyfans" title="Weibo → https:&#x2F;&#x2F;weibo.com&#x2F;wittyfans" rel="noopener" target="_blank"><i class="fab fa-weibo fa-fw"></i>Weibo</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://twitter.com/wittyfans0" title="Twitter → https:&#x2F;&#x2F;twitter.com&#x2F;wittyfans0" rel="noopener" target="_blank"><i class="fab fa-twitter fa-fw"></i>Twitter</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Scott</span>
</div>

        






<script>
  (function() {
    function leancloudSelector(url) {
      url = encodeURI(url);
      return document.getElementById(url).querySelector('.leancloud-visitors-count');
    }

    function addCount(Counter) {
      var visitors = document.querySelector('.leancloud_visitors');
      var url = decodeURI(visitors.id);
      var title = visitors.dataset.flagTitle;

      Counter('get', '/classes/Counter?where=' + encodeURIComponent(JSON.stringify({ url })))
        .then(response => response.json())
        .then(({ results }) => {
          if (results.length > 0) {
            var counter = results[0];
            leancloudSelector(url).innerText = counter.time + 1;
            Counter('put', '/classes/Counter/' + counter.objectId, { time: { '__op': 'Increment', 'amount': 1 } })
              .catch(error => {
                console.error('Failed to save visitor count', error);
              });
          } else {
              Counter('post', '/classes/Counter', { title, url, time: 1 })
                .then(response => response.json())
                .then(() => {
                  leancloudSelector(url).innerText = 1;
                })
                .catch(error => {
                  console.error('Failed to create', error);
                });
          }
        })
        .catch(error => {
          console.error('LeanCloud Counter Error', error);
        });
    }

    function showTime(Counter) {
      var visitors = document.querySelectorAll('.leancloud_visitors');
      var entries = [...visitors].map(element => {
        return decodeURI(element.id);
      });

      Counter('get', '/classes/Counter?where=' + encodeURIComponent(JSON.stringify({ url: { '$in': entries } })))
        .then(response => response.json())
        .then(({ results }) => {
          for (let url of entries) {
            let target = results.find(item => item.url === url);
            leancloudSelector(url).innerText = target ? target.time : 0;
          }
        })
        .catch(error => {
          console.error('LeanCloud Counter Error', error);
        });
    }

    let { app_id, app_key, server_url } = {"enable":true,"app_id":"7sScl0n1AlEtVDaUHuXzxPqc-gzGzoHsz","app_key":"qKXpoqGbK1sdFYMiik7Evuan","server_url":"https://7sscl0n1.lc-cn-n1-shared.com","security":false};
    function fetchData(api_server) {
      var Counter = (method, url, data) => {
        return fetch(`${api_server}/1.1${url}`, {
          method,
          headers: {
            'X-LC-Id'     : app_id,
            'X-LC-Key'    : app_key,
            'Content-Type': 'application/json',
          },
          body: JSON.stringify(data)
        });
      };
      if (CONFIG.page.isPost) {
        if (CONFIG.hostname !== location.hostname) return;
        addCount(Counter);
      } else if (document.querySelectorAll('.post-title-link').length >= 1) {
        showTime(Counter);
      }
    }

    let api_server = app_id.slice(-9) !== '-MdYXbMMI' ? server_url : `https://${app_id.slice(0, 8).toLowerCase()}.api.lncldglobal.com`;

    if (api_server) {
      fetchData(api_server);
    } else {
      fetch('https://app-router.leancloud.cn/2/route?appId=' + app_id)
        .then(response => response.json())
        .then(({ api_server }) => {
          fetchData('https://' + api_server);
        });
    }
  })();
</script>


      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>

<script src="/js/utils.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  
      

<script>
  if (typeof MathJax === 'undefined') {
    window.MathJax = {
      loader: {
        source: {
          '[tex]/amsCd': '[tex]/amscd',
          '[tex]/AMScd': '[tex]/amscd'
        }
      },
      tex: {
        inlineMath: {'[+]': [['$', '$']]},
        tags: 'ams'
      },
      options: {
        renderActions: {
          findScript: [10, doc => {
            document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
              const display = !!node.type.match(/; *mode=display/);
              const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
              const text = document.createTextNode('');
              node.parentNode.replaceChild(text, node);
              math.start = {node: text, delim: '', n: 0};
              math.end = {node: text, delim: '', n: 0};
              doc.math.push(math);
            });
          }, '', false],
          insertedScript: [200, () => {
            document.querySelectorAll('mjx-container').forEach(node => {
              let target = node.parentNode;
              if (target.nodeName.toLowerCase() === 'li') {
                target.parentNode.classList.add('has-jax');
              }
            });
          }, '', false]
        }
      }
    };
    (function () {
      var script = document.createElement('script');
      script.src = '//cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js';
      script.defer = true;
      document.head.appendChild(script);
    })();
  } else {
    MathJax.startup.document.state(0);
    MathJax.texReset();
    MathJax.typeset();
  }
</script>

    

  


<script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : false,
      appId      : '7sScl0n1AlEtVDaUHuXzxPqc-gzGzoHsz',
      appKey     : 'qKXpoqGbK1sdFYMiik7Evuan',
      placeholder: "Just go go",
      avatar     : 'mm',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : false,
      lang       : '' || 'zh-cn',
      path       : location.pathname,
      recordIP   : false,
      serverURLs : ''
    });
  }, window.Valine);
});
</script>

</body>
</html>
